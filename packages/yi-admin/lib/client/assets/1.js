(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{773:function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}},774:function(t,e,a){var n=a(775),i=a(776),r=a(777),o=a(778);t.exports=function(t){return n(t)||i(t)||r(t)||o()}},775:function(t,e,a){var n=a(773);t.exports=function(t){if(Array.isArray(t))return n(t)}},776:function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}},777:function(t,e,a){var n=a(773);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}},778:function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},779:function(t,e,a){"use strict";var n=a(2),i=a.n(n),r={placeholder:"请选择时间"},o={lang:i()({placeholder:"请选择日期",rangePlaceholder:["开始日期","结束日期"]},{today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:i()({},r)};o.lang.ok="确 定";var s={locale:"zh-cn",Pagination:{items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页"},DatePicker:o,TimePicker:r,Calendar:o,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",selectAll:"全选当页",selectInvert:"反选当页",sortTitle:"排序",expand:"展开行",collapse:"关闭行"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"}};e.a=s},783:function(t,e,a){var n=a(825);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(10).default)("99f6adf2",n,!1,{sourceMap:!1})},784:function(t,e,a){var n=a(827);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(10).default)("22ba8887",n,!1,{sourceMap:!1})},785:function(t,e,a){var n=a(829);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(10).default)("7d88a4a7",n,!1,{sourceMap:!1})},786:function(t,e,a){var n=a(831);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(10).default)("ff766086",n,!1,{sourceMap:!1})},823:function(t,e,a){"use strict";a.r(e);var n={array:function(){return a.e(23).then(a.bind(null,900))},base:function(){return a.e(24).then(a.bind(null,901))},boolean:function(){return a.e(30).then(a.bind(null,902))},"string-enum":function(){return a.e(25).then(a.bind(null,903))},"string-html":function(){return a.e(26).then(a.bind(null,904))},"string-image":function(){return a.e(27).then(a.bind(null,905))},"string-remote-select":function(){return a.e(28).then(a.bind(null,906))},"string-textarea":function(){return a.e(29).then(a.bind(null,886))}};e.default=n},824:function(t,e,a){"use strict";var n=a(783);a.n(n).a},825:function(t,e,a){(e=a(9)(!1)).push([t.i,".table-sort-block>.action-lable{line-height:2.5em}.table-sort-block>.sort-item{display:inline-block;vertical-align:top;margin:0 .5em 0 .2em}.table-sort-block>.sort-item>.sort-item-info{line-height:2;padding:0 1em}.table-sort-block button.text-button{border:none;background:none;font-size:1em;color:#409eff;cursor:pointer}.table-sort-block button.text-button.danger{color:#f56c6c}",""]),t.exports=e},826:function(t,e,a){"use strict";var n=a(784);a.n(n).a},827:function(t,e,a){(e=a(9)(!1)).push([t.i,".table-filter>.action-lable{line-height:2.5em}.table-filter>.filter-item{display:inline-block;vertical-align:top;margin:0 1em 1em 0}.table-filter>.filter-item>.tooltip>.filter-item-label{color:#000;margin:0 .2em 0 0;display:inline-block}.table-filter>.filter-item>.tooltip>.filter-fields-wrap{display:inline-block}.table-filter button.text-button{border:none;background:none;font-size:1em;color:#409eff;cursor:pointer}.table-filter button.text-button.danger{color:#f56c6c}",""]),t.exports=e},828:function(t,e,a){"use strict";var n=a(785);a.n(n).a},829:function(t,e,a){(e=a(9)(!1)).push([t.i,".table-view{font-size:12px;margin:0 1.5em}.table-view .top-action{padding:.8em 0 .5em}.table-view .top-action>.top-action-row{font-size:.9em;color:rgba(0,0,0,.667);padding:.6em 0}.table-view .top-action>.top-action-row>.ant-btn{margin:0 .3em}.table-view .top-action>.top-action-row>.action-lable,.table-view .top-action>.top-action-row>.ant-select{margin:0 .8em 0 0}.table-view .top-action>.top-action-row>.ant-select.dashed>.ant-select-selection{border-style:dashed}.table-view .top-action>.top-action-row>.batch-action-helptext{font-size:12px;margin:0 .3em;padding:0 .3em}.table-view .panel-box{box-shadow:0 0 3px rgba(0,0,0,.067)}.table-view .panel-box>.table-wrapper{overflow-x:auto}.table-view .panel-box>.table-wrapper>table{min-width:100%;background:#fff;border-collapse:collapse;font-size:12px}.table-view .panel-box>.table-wrapper>table>thead{border-bottom:2px dotted rgba(0,0,0,.267);line-height:1.2;color:rgba(0,0,0,.667)}.table-view .panel-box>.table-wrapper>table>thead>tr>th{padding:1.2em .4em 1em;text-align:center}.table-view .panel-box>.table-wrapper>table>thead>tr>th.checkbox-all{padding:1.2em .8em 1em;text-align:left}.table-view .panel-box>.table-wrapper>table>thead>tr>th.field{min-width:4em}.table-view .panel-box>.table-wrapper>table>tbody{line-height:1.5}.table-view .panel-box>.table-wrapper>table>tbody>tr>td{padding:.8em;font-size:12px;color:rgba(0,0,0,.667);border-right:1px dotted rgba(0,0,0,.133)}.table-view .panel-box>.table-wrapper>table>tbody>tr>td:last-child{border-right:none}.table-view .panel-box>.table-wrapper>table>tbody>tr>td.actions-td,.table-view .panel-box>.table-wrapper>table>tbody>tr>td.index-td{text-align:center}.table-view .panel-box>.table-wrapper>table>tbody>tr>td.actions-td .ant-btn{margin:.1em}.table-view .panel-box>.table-wrapper>table>tbody>tr>td>.fields-wrap{text-align:center}.table-view .panel-box>.table-wrapper>table>tbody>tr:nth-child(2n - 1){background:rgba(0,0,0,.039)}.table-view .panel-box>.table-wrapper>.no-data{text-align:center;line-height:4;color:rgba(0,0,0,.533);font-size:1.3em}.table-view .panel-box>.table-view-footer{border-top:1px dashed rgba(0,0,0,.2);line-height:3em;background:#fff;padding:1em;color:rgba(0,0,0,.667)}",""]),t.exports=e},830:function(t,e,a){"use strict";var n=a(786);a.n(n).a},831:function(t,e,a){(e=a(9)(!1)).push([t.i,"body{background:#f6f6f6}#app{padding:0 0 2em;transition:opacity .3s}#app>.ant-breadcrumb{padding:1em 0;margin:0 1.2em}#app>pre{font-size:12px}",""]),t.exports=e},909:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-config-provider",{attrs:{locale:t.zhCN}},[a("div",{attrs:{id:"app"}},[a("a-breadcrumb",{attrs:{separator:">"}},[a("a-breadcrumb-item",[a("a",{attrs:{href:"../../",target:"_top"}},[t._v("\n               首页\n            ")])]),t.state.hasFilterQuery?t._e():a("a-breadcrumb-item",[t._v("\n            "+t._s(t.state.modelInfo.title||t.state.modelInfo.name)+" 管理\n         ")]),t.state.hasFilterQuery?a("a-breadcrumb-item",[a("a",{attrs:{href:"./"}},[t._v("\n               "+t._s(t.state.modelInfo.title||t.state.modelInfo.name)+" 管理\n            ")])]):t._e(),t.state.hasFilterQuery?a("a-breadcrumb-item",[t._v("\n            带条件:"+t._s(t.state.filterQueryStr)+" 的数据管理\n         ")]):t._e()],1),a("TableView")],1)])};n._withStripped=!0;var i=a(40),r=a.n(i),o=a(65),s=a.n(o),l=a(779),c=a(140),u=a.n(c),d=a(139);function p(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-spin",{staticClass:"table-view",attrs:{spinning:t.state.loading}},[a("div",{staticClass:"top-action"},[a("TableAction",{staticClass:"top-action-row",on:{createData:t.createData,reloadData:t.reloadData}}),a("TableSort",{staticClass:"top-action-row"}),a("TableFilter",{staticClass:"top-action-row",on:{reloadData:t.reloadData}}),a("div",{staticClass:"top-action-row"},[a("span",{staticClass:"action-lable"},[t._v("对选中项进行")]),t.checkedIdList?a("a-select",{class:0===t.checkedIdList.length?"dashed":"",staticStyle:{"min-width":"150px"},attrs:{placeholder:"请选择操作"},model:{value:t.batchActionIndex,callback:function(e){t.batchActionIndex=e},expression:"batchActionIndex"}},t._l(t.batchActionOptions,(function(e){return a("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v("\n               "+t._s(e.label)+"\n            ")])})),1):t._e(),[t.selectedBatchAction&&t.selectedBatchAction.popConfirm?a("a-popconfirm",{attrs:{title:"确定执行这个操作吗？","ok-text":"是","cancel-text":"否","ok-type":t.selectedBatchAction.buttonType||"primary"},on:{confirm:function(e){return t.doBatchAction(t.selectedBatchAction)}}},[a("a-button",{attrs:{type:t.selectedBatchAction.buttonType||"",icon:t.selectedBatchAction.buttonIcon||""}},[t._v("\n                  执行\n               ")])],1):a("a-button",{attrs:{type:t.selectedBatchAction&&t.selectedBatchAction.buttonType||"",icon:t.selectedBatchAction&&t.selectedBatchAction.buttonIcon||"",disabled:null==t.selectedBatchAction},on:{click:function(e){return t.doBatchAction(t.selectedBatchAction)}}},[t._v("\n               执行\n            ")])],t.checkedIdList?a("span",{staticClass:"batch-action-helptext"},[t._v("\n            "+t._s(0===t.checkedIdList.length?"当前未勾选任何项目":"已选中"+t.checkedIdList.length+"条记录")+"\n         ")]):t._e()],2)],1),a("div",{staticClass:"panel-box"},[a("div",{staticClass:"table-wrapper"},[a("table",{staticClass:"table-view-table"},[a("thead",{staticClass:"table-view-thead"},[a("tr",[a("th",{staticClass:"checkbox-all"},[a("a-checkbox",{attrs:{checked:t.allChecked},on:{change:t.handelCheckAll}})],1),a("th",[t._v("#")]),a("th",[t._v("id")]),a("th",[t._v("操作")]),t._l(t.listFields,(function(e,n){return a("th",{key:n,staticClass:"field"},[a("span",{attrs:{"field-name":e.fieldName},domProps:{textContent:t._s(e.fieldNameAlias||e.fieldName)}})])}))],2)]),a("tbody",{staticClass:"table-view-tbody"},t._l(t.listData,(function(e,n){return a("tr",{key:e.id||n},[a("td",[a("a-checkbox",{model:{value:t.listCheckedStatusArray[n],callback:function(e){t.$set(t.listCheckedStatusArray,n,e)},expression:"listCheckedStatusArray[index]"}})],1),a("td",{staticClass:"index-td"},[t._v("\n                     "+t._s(n+1)+"\n                  ")]),a("td",[a("a",{attrs:{href:"edit/?id="+e.id}},[t._v(t._s(e.id))])]),a("td",{staticClass:"actions-td"},[t._l(t.rowListActions,(function(n,i){return[n.popConfirm?a("a-popconfirm",{key:i,attrs:{title:"确定执行这个操作吗？","ok-text":"是","cancel-text":"否","ok-type":n.buttonType||"primary"},on:{confirm:function(a){return t.doActions(n,[e.id])}}},[a("a-button",{attrs:{size:"small",type:n.buttonType||"",icon:n.buttonIcon||""}},[t._v("\n                              "+t._s(n.actionName)+"\n                           ")])],1):a("a-button",{key:i,attrs:{size:"small",type:n.buttonType||"",icon:n.buttonIcon||""},on:{click:function(a){return t.doActions(n,[e.id])}}},[t._v("\n                           "+t._s(n.actionName)+"\n                        ")])]}))],2),t._l(t.listFields,(function(n,i){return a("td",{key:i},[a("div",{staticClass:"fields-wrap"},[a(t.getComponent(n.componentName),{tag:"component",attrs:{id:e.id,config:n.componentConfig,"field-name":n.fieldName,values:e.values,"object-key":n.fieldName,value:e.values[n.fieldName]}})],1)])}))],2)})),0)]),0===t.listData.length?a("div",{staticClass:"no-data"},[t._v("\n            暂时没有数据呦~\n            "),t.state.total>0?a("span",[t._v("可能是您选择的页码太大，您可以前往 "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){return t.handleCurrentChange(1)}}},[t._v("第1页")])]):t._e()]):t._e()]),a("div",{staticClass:"table-view-footer"},[a("a-pagination",{attrs:{current:t.pageIndex,"page-size-options":["10","20","50","100","200"],"page-size":t.state.pageSize,total:t.state.total,"show-total":function(t){return"总共 "+t+" 项记录"},"show-size-changer":"","show-quick-jumper":""},on:{showSizeChange:t.handleSizeChange,change:t.handleCurrentChange}})],1)])])};f._withStripped=!0;var b=a(823),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-sort-block"},[a("span",{staticClass:"action-lable"},[t._v("排序:")]),t._l(t.sortList,(function(e,n){return a("div",{key:n,staticClass:"sort-item"},[a("a-select",{staticStyle:{"min-width":"150px"},attrs:{placeholder:"请选择"},on:{change:t.handleChange},model:{value:t.sortList[n],callback:function(e){t.$set(t.sortList,n,e)},expression:"sortList[idx]"}},t._l(t.getOptions(n),(function(e){return a("a-select-option",{key:e.value,attrs:{label:e.label,value:e.value}},[a("span",[t._v(t._s(e.label))])])})),1),a("div",{staticClass:"sort-item-info"},[a("button",{staticClass:"text-button danger",on:{click:function(e){return t.removeRule(n)}}},[t._v("\n            删除\n         ")]),a("span",[t._v("该排序")])])],1)})),a("button",{staticClass:"text-button",on:{click:t.createNewRule}},[t._v("\n      增加\n   ")]),a("span",[t._v("排序规则")])],2)};h._withStripped=!0;var m=a(774),v=a.n(m),g={computed:{state:function(){return this.$store.state},listFields:function(){return this.state.listFields||[]},sortList:function(){return this.state.sortList},sortOptions:function(){var t=[];t.push({label:"+ id 增序",value:"_id"},{label:"- id 降序",value:"-_id"});for(var e=0;e<this.listFields.length;e+=1){var a=this.listFields[e],n=a.fieldNameAlias||a.fieldName;t.push({label:"".concat(n," 增序(+)"),value:"".concat(a.fieldName)},{label:"".concat(n," 降序(-)"),value:"-".concat(a.fieldName)})}return t}},methods:{getOptions:function(t){for(var e=this.sortOptions,a=[],n=v()(this.sortList).slice(0,t),i=0;i<e.length;i+=2){var r=e[i],o=e[i+1];n.includes(r.value)||n.includes(o.value)||a.push(r,o)}return a},createNewRule:function(){this.sortList.push("")},removeRule:function(t){this.sortList.splice(t,1)},clearRules:function(){for(var t=this.sortList,e=[],a=[],n=0;n<t.length;n+=1){var i=t[n],r=i.replace(/^-/,"");a.includes(r)||(e.push(i),a.push(r))}this.state.sortList=e},handleChange:function(){this.clearRules()}}},x=(a(824),a(138)),w=Object(x.a)(g,h,[],!1,null,null,null);w.options.__file="src/client/pages/model-admin-list/table-sort.vue";var y=w.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.filterFields.length?a("div",{staticClass:"table-filter"},[a("span",{staticClass:"action-lable"},[t._v("过滤:")]),t._l(t.filterFields,(function(e,n){return a("div",{key:n,staticClass:"filter-item"},[a("a-tooltip",{staticClass:"tooltip",attrs:{placement:"topLeft",title:e.componentConfig.tip}},[a("label",{staticClass:"filter-item-label"},[t._v(t._s(e.fieldNameAlias||e.fieldName)+": ")]),a("div",{staticClass:"filter-fields-wrap"},[a(t.getComponent(e.componentName),{tag:"component",attrs:{"filter-form-data":t.filterForm,"object-key":e.fieldName,config:e.componentConfig,"field-name":e.fieldName},on:{reloadData:t.reloadData},model:{value:t.filterForm[e.fieldName],callback:function(a){t.$set(t.filterForm,e.fieldName,a)},expression:"filterForm[fItem.fieldName]"}})],1)])],1)})),a("a-button",{attrs:{type:"dashed",icon:"search"},on:{click:t.reloadData}},[t._v("\n      查找\n   ")])],2):t._e()};k._withStripped=!0;var _={base:function(){return a.e(19).then(a.bind(null,914))},"remote-select":function(){return a.e(20).then(a.bind(null,912))},select:function(){return a.e(21).then(a.bind(null,913))},"string-search":function(){return a.e(22).then(a.bind(null,915))}},C={computed:{state:function(){return this.$store.state},filterFields:function(){return this.state.filterFields},filterForm:function(){return this.state.filterForm}},methods:{getComponent:function(t){return Object.prototype.hasOwnProperty.call(_,t)?_[t]:_.string},reloadData:function(){this.$emit("reloadData")}}},A=(a(826),Object(x.a)(C,k,[],!1,null,null,null));A.options.__file="src/client/pages/model-admin-list/table-filter.vue";var L=A.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table-action"},[a("a-button",{attrs:{icon:"plus",type:"dashed"},on:{click:function(e){return t.$emit("createData")}}},[t._v("\n      新增\n   ")]),a("a-button",{attrs:{icon:"reload",type:"dashed"},on:{click:function(e){return t.$emit("reloadData")}}},[t._v("\n      刷新\n   ")])],1)};S._withStripped=!0;var I=Object(x.a)({},S,[],!1,null,null,null);I.options.__file="src/client/pages/model-admin-list/table-action.vue";var D={components:{TableSort:y,TableFilter:L,TableAction:I.exports},data:function(){return{pageIdx:0,batchActionIndex:null}},computed:{state:function(){return this.$store.state},pageIndex:function(){return this.state.pageIndex},listFields:function(){return this.state.listFields},listActions:function(){return this.state.listActions},listData:function(){return this.state.listData},listCheckedStatusArray:function(){return this.state.listCheckedStatusArray},checkedIdList:function(){for(var t=[],e=this.listData,a=this.listCheckedStatusArray,n=0;n<e.length;n+=1){var i=e[n];!0===a[n]&&t.push(i.id)}return t},betListActions:function(){return this.listActions.filter((function(t){return t.isBatchAction}))},batchActionOptions:function(){for(var t=[],e=this.betListActions,a=0;a<e.length;a+=1){var n=e[a];t.push({value:a,label:n.actionName})}return t},selectedBatchAction:function(){return"number"==typeof this.batchActionIndex?this.betListActions[this.batchActionIndex]:null},rowListActions:function(){return this.listActions.filter((function(t){return t.isTableRowAction}))},allChecked:function(){for(var t=!0,e=0;e<this.listCheckedStatusArray.length;e+=1)if(!this.listCheckedStatusArray[e]){t=!1;break}return t}},watch:{"state.sortList":function(){var t=this;this.$nextTick((function(){t.reloadData()}))}},methods:{getComponent:function(t){return Object.prototype.hasOwnProperty.call(b.default,t)?b.default[t]:b.default.base},handelCheckAll:function(){var t=!0;this.allChecked&&(t=!1);for(var e=0;e<this.listCheckedStatusArray.length;e+=1)this.$set(this.listCheckedStatusArray,e,t)},handleSizeChange:function(t,e){var a=this;return s()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.$store.commit("setPageIndex",1),a.$store.commit("setPageSize",e),t.prev=2,t.next=5,a.$store.dispatch("fetchListData");case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),a.$notify.error({message:"出错了",description:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"拉取数据出错了"});case 10:case"end":return t.stop()}}),t,null,[[2,7]])})))()},handleCurrentChange:function(t){var e=this,a=this.state.pageIndex;this.$store.commit("setPageIndex",0),this.$nextTick(s()(r.a.mark((function n(){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.$store.commit("setPageIndex",a),n.prev=1,n.next=4,e.$store.dispatch("fetchListData",{pageIndex:t});case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e.$notify.error({message:"出错了",description:(null===n.t0||void 0===n.t0?void 0:n.t0.message)||"拉取数据出错了"});case 9:case"end":return n.stop()}}),n,null,[[1,6]])}))))},createData:function(){return s()(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:window.location="edit/";case 1:case"end":return t.stop()}}),t)})))()},reloadData:function(){var t=this;return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("fetchListData");case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.$notify.error({message:"出错了",description:(null===e.t0||void 0===e.t0?void 0:e.t0.message)||"拉取数据出错了"});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()},doBatchAction:function(t){var e=this;return s()(r.a.mark((function a(){var n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!((n=e.checkedIdList).length<=0)){a.next=4;break}return e.$notify.error({message:"未勾选任何项目"}),a.abrupt("return");case 4:e.doActions(t,n);case 5:case"end":return a.stop()}}),a)})))()},doActions:function(t){var e=arguments,a=this;return s()(r.a.mark((function n(){var i,o,s,l,c,u,d,p;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.length>1&&void 0!==e[1]?e[1]:[],!a.state.loading){n.next=3;break}return n.abrupt("return");case 3:if(!a.state.loading){n.next=5;break}return n.abrupt("return");case 5:return a.$store.commit("setLoading",!0),n.prev=6,n.next=9,a.$ajax.post("list/action/",{actionName:t.actionName,idList:i});case 9:if(o=n.sent,!(s=o.data).success){n.next=16;break}l=s.data||{},c=l.successfulNum,u=void 0===c?0:c,d=l.failedNum,p=void 0===d?0:d,a.$notify.success({message:"".concat(t.actionName," 执行完成"),description:"".concat(u," 项执行成功，").concat(p," 项执行失败")}),n.next=17;break;case 16:throw new Error((null==s?void 0:s.message)||"执行 ".concat(t.actionName," 操作失败了"));case 17:n.next=22;break;case 19:n.prev=19,n.t0=n.catch(6),a.$notify.error({message:"".concat(t.actionName," 未执行完成"),description:(null===n.t0||void 0===n.t0?void 0:n.t0.message)||"执行 ".concat(t.actionName," 操作失败了")});case 22:return n.prev=22,a.$store.commit("setLoading",!1),n.finish(22);case 25:return n.prev=25,n.next=28,a.$store.dispatch("fetchListData");case 28:n.next=33;break;case 30:n.prev=30,n.t1=n.catch(25),a.$notify.error({message:"出错了",description:(null===n.t1||void 0===n.t1?void 0:n.t1.message)||"拉取数据出错了"});case 33:case"end":return n.stop()}}),n,null,[[6,19,22,25],[25,30]])})))()}}},F=(a(828),Object(x.a)(D,f,[],!1,null,null,null));F.options.__file="src/client/pages/model-admin-list/table-view.vue";var O={components:{TableView:F.exports},createStore:function(t){var e=t.ajax.get,a=t.runtime,n={};if(a.query.filter)try{n=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?p(Object(a),!0).forEach((function(e){u()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},JSON.parse(a.query.filter))}catch(t){}return new d.a.Store({state:{modelInfo:{},loading:!1,pageIndex:1,pageSize:10,total:0,sortList:["-_id"],hasFilterQuery:Object.keys(n).length>0,filterQueryStr:JSON.stringify(n),filterForm:n,listFields:[],filterFields:[],listActions:[],listData:[],listCheckedStatusArray:[]},mutations:{setLoading:function(t,e){t.loading=!!e},setListFields:function(t,e){var a=e.data;t.listFields=a.fields,t.filterFields=a.filterFields,t.modelInfo=a.modelInfo},setListActions:function(t,e){var a=e.data,n=[],i={};(a||[]).forEach((function(t){Object.prototype.hasOwnProperty.call(i,t.actionName)||(n.push(t),i[t.actionName]=!0)})),t.listActions=n},setListData:function(t,e){var a=e.dataList,n=e.total;t.total=n,t.listData=a;var i=new Array(a.length);i.fill(!1),t.listCheckedStatusArray=i},setPageSize:function(t,e){t.pageSize=e},setPageIndex:function(t,e){t.pageIndex=e}},actions:{fetchListFields:function(){var t=this;return s()(r.a.mark((function a(){var n,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e("list/fields/",{});case 2:if(n=a.sent,!(i=n.data).success){a.next=8;break}t.commit("setListFields",i),a.next=9;break;case 8:throw new Error((null==i?void 0:i.message)||"拉取字段信息出错了");case 9:case"end":return a.stop()}}),a)})))()},fetchListActions:function(){var t=this;return s()(r.a.mark((function a(){var n,i;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e("list/actions/",{});case 2:if(n=a.sent,!(i=n.data).success){a.next=8;break}t.commit("setListActions",i),a.next=9;break;case 8:throw new Error((null==i?void 0:i.message)||"拉取操作信息出错了");case 9:case"end":return a.stop()}}),a)})))()},fetchListData:function(t){var a=arguments,n=this;return s()(r.a.mark((function i(){var o,s,l,c,u,d;return r.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=t.state,s=a.length>1&&void 0!==a[1]?a[1]:{},l=s.pageIndex,c=void 0===l?o.pageIndex:l,!o.loading){i.next=4;break}return i.abrupt("return");case 4:return n.commit("setLoading",!0),i.prev=5,i.next=8,e("list/data/",{pageIndex:c,pageSize:o.pageSize,sort:o.sortList.join(" "),filter:JSON.stringify(o.filterForm)});case 8:if(u=i.sent,!(d=u.data).success){i.next=15;break}n.commit("setListData",d.data),n.commit("setPageIndex",c),i.next=16;break;case 15:throw new Error((null==d?void 0:d.message)||"拉取列表数据出错了");case 16:return i.prev=16,n.commit("setLoading",!1),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[5,,16,19]])})))()}}})},fetchData:function(t){return s()(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t.store.dispatch("fetchListFields"),t.store.dispatch("fetchListActions"),t.store.dispatch("fetchListData")]);case 2:case"end":return e.stop()}}),e)})))()},data:function(){return{zhCN:l.a}},computed:{state:function(){return this.$store.state}},mounted:function(){}},N=(a(830),Object(x.a)(O,n,[],!1,null,null,null));N.options.__file="src/client/pages/model-admin-list/app.vue";e.default=N.exports}}]);