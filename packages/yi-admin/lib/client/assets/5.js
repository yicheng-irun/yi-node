(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{779:function(e,t,n){"use strict";var r=n(2),a=n.n(r),i={placeholder:"请选择时间"},o={lang:a()({placeholder:"请选择日期",rangePlaceholder:["开始日期","结束日期"]},{today:"今天",now:"此刻",backToToday:"返回今天",ok:"确定",timeSelect:"选择时间",dateSelect:"选择日期",weekSelect:"选择周",clear:"清除",month:"月",year:"年",previousMonth:"上个月 (翻页上键)",nextMonth:"下个月 (翻页下键)",monthSelect:"选择月份",yearSelect:"选择年份",decadeSelect:"选择年代",yearFormat:"YYYY年",dayFormat:"D日",dateFormat:"YYYY年M月D日",dateTimeFormat:"YYYY年M月D日 HH时mm分ss秒",previousYear:"上一年 (Control键加左方向键)",nextYear:"下一年 (Control键加右方向键)",previousDecade:"上一年代",nextDecade:"下一年代",previousCentury:"上一世纪",nextCentury:"下一世纪"}),timePickerLocale:a()({},i)};o.lang.ok="确 定";var s={locale:"zh-cn",Pagination:{items_per_page:"条/页",jump_to:"跳至",jump_to_confirm:"确定",page:"页",prev_page:"上一页",next_page:"下一页",prev_5:"向前 5 页",next_5:"向后 5 页",prev_3:"向前 3 页",next_3:"向后 3 页"},DatePicker:o,TimePicker:i,Calendar:o,global:{placeholder:"请选择"},Table:{filterTitle:"筛选",filterConfirm:"确定",filterReset:"重置",selectAll:"全选当页",selectInvert:"反选当页",sortTitle:"排序",expand:"展开行",collapse:"关闭行"},Modal:{okText:"确定",cancelText:"取消",justOkText:"知道了"},Popconfirm:{cancelText:"取消",okText:"确定"},Transfer:{searchPlaceholder:"请输入搜索内容",itemUnit:"项",itemsUnit:"项"},Upload:{uploading:"文件上传中",removeFile:"删除文件",uploadError:"上传错误",previewFile:"预览文件",downloadFile:"下载文件"},Empty:{description:"暂无数据"},Icon:{icon:"图标"},Text:{edit:"编辑",copy:"复制",copied:"复制成功",expand:"展开"},PageHeader:{back:"返回"}};t.a=s},781:function(e,t,n){var r=n(822);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(10).default)("8b707416",r,!1,{sourceMap:!1})},782:function(e,t,n){var r=n(824);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);(0,n(10).default)("51d93dae",r,!1,{sourceMap:!1})},820:function(e,t,n){"use strict";n.r(t);var r={"array-string-tag":function(){return n.e(2).then(n.bind(null,892))},array:function(){return n.e(11).then(n.bind(null,894))},base:function(){return n.e(12).then(n.bind(null,895))},boolean:function(){return n.e(13).then(n.bind(null,896))},"date-time":function(){return n.e(14).then(n.bind(null,897))},"number-enum":function(){return n.e(15).then(n.bind(null,898))},"number-remote-select":function(){return n.e(3).then(n.bind(null,899))},number:function(){return n.e(16).then(n.bind(null,900))},"string-enum":function(){return n.e(17).then(n.bind(null,901))},"string-file":function(){return n.e(7).then(n.bind(null,902))},"string-image":function(){return n.e(8).then(n.bind(null,916))},"string-jodit-editor":function(){return n.e(9).then(n.bind(null,903))},"string-remote-select":function(){return n.e(4).then(n.bind(null,904))},string:function(){return n.e(19).then(n.bind(null,905))},"string-textarea":function(){return n.e(18).then(n.bind(null,906))},"string-ueditor":function(){return n.e(10).then(n.bind(null,907))}};t.default=r},821:function(e,t,n){"use strict";var r=n(781);n.n(r).a},822:function(e,t,n){(t=n(9)(!1)).push([e.i,".edit-form{padding:2em 0;margin:0 1em}@media (min-width:576px){.edit-form>div.ant-spin-container>.ant-form>.ant-form-item>.ant-form-item-label{position:absolute;width:10em}.edit-form>div.ant-spin-container>.ant-form>.ant-form-item>.ant-form-item-control-wrapper{position:relative;min-height:1em;margin:0 0 0 10.5em}}.edit-form .ya-help-text{margin:.5em 0 0;color:rgba(0,0,0,.467);font-size:.8em;line-height:1.5}",""]),e.exports=t},823:function(e,t,n){"use strict";var r=n(782);n.n(r).a},824:function(e,t,n){(t=n(9)(!1)).push([e.i,"body{background:#f5f6f7}#app>.ant-breadcrumb{padding:1em 0;margin:0 1.2em}#app>pre{font-size:12px}",""]),e.exports=t},919:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-config-provider",{attrs:{locale:e.zhCN}},[n("div",{attrs:{id:"app"}},[n("a-breadcrumb",{attrs:{separator:">"}},[n("a-breadcrumb-item",[n("a",{attrs:{href:"../../../",target:"_top"}},[e._v("首页")])]),n("a-breadcrumb-item",[n("a",{attrs:{href:"../"}},[e._v("\n               "+e._s(e.state.modelInfo.title||e.state.modelInfo.name)+" 管理\n            ")])]),n("a-breadcrumb-item",[e._v("\n            "+e._s(e.state.modelInfo.title||e.state.modelInfo.name)+" "+e._s(e.state.editId?"编辑":"新增")+"\n         ")])],1),n("edit-form",{attrs:{"edit-id":e.state.editId,"edit-form-fields":e.state.editFormFields,"edit-form-data":e.state.editFormData}})],1)])};r._withStripped=!0;var a=n(40),i=n.n(a),o=n(65),s=n.n(o),d=n(779),c=n(139),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-spin",{staticClass:"edit-form",attrs:{spinning:e.state.loading}},[n("a-form",{ref:"form",attrs:{model:e.editFormData,layout:"horizontal"}},[e.editId?n("a-form-item",{attrs:{label:"id:"}},[n("div",{staticClass:"edit-id"},[e._v("\n            "+e._s(e.editId)+"\n         ")])]):e._e(),e._l(e.editFormFields,(function(t,r){return n("a-form-item",{key:r,attrs:{label:(t.fieldNameAlias||t.fieldName)+":",prop:t.fieldName,required:t.componentConfig.required}},[n("div",{staticClass:"form-item-wrap"},[n(e.getComponent(t.componentName),{tag:"component",attrs:{"edit-form-data":e.editFormData,"object-key":t.fieldName,name:t.fieldName,config:t.componentConfig,"field-name":t.fieldName},model:{value:e.editFormData[t.fieldName],callback:function(n){e.$set(e.editFormData,t.fieldName,n)},expression:"editFormData[item.fieldName]"}})],1),t.componentConfig.helpText?n("p",{staticClass:"ya-help-text",domProps:{textContent:e._s(t.componentConfig.helpText)}}):e._e()])})),n("a-form-item",[n("a-button-group",[n("a-button",{attrs:{type:"primary",icon:"check"},on:{click:e.submit}},[e._v("\n               "+e._s(e.editId?"保存":"提交")+"\n            ")]),n("a-button",{attrs:{type:"dashed",icon:"undo"},on:{click:e.reset}},[e._v("\n               重置\n            ")])],1)],1)],2)],1)};l._withStripped=!0;var u=n(820),m={components:{},props:{editId:{type:String,default:""},editFormData:{type:Object,default:function(){return{}}},editFormFields:{type:Array,default:function(){return[]}}},computed:{state:function(){return this.$store.state},formRules:function(){return{}}},methods:{getComponent:function(e){return Object.prototype.hasOwnProperty.call(u.default,e)?u.default[e]:u.default.base},submit:function(){var e=this;return s()(i.a.mark((function t(){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.loading){t.next=2;break}return t.abrupt("return");case 2:return e.$store.commit("setLoading",!0),t.prev=3,t.next=6,e.$store.dispatch("formSubmit");case 6:if(!(null==(n=t.sent)?void 0:n.success)){t.next=11;break}e.$notify.success({message:"保存成功",description:"保存成功"}),t.next=12;break;case 11:throw new Error((null==n?void 0:n.message)||"保存失败");case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3),e.$notify.error({message:"提交出错了",description:(null===t.t0||void 0===t.t0?void 0:t.t0.message)||"".concat(t.t0)});case 17:e.$store.commit("setLoading",!1);case 18:case"end":return t.stop()}}),t,null,[[3,14]])})))()},reset:function(){try{this.$store.commit("resetEditFormData"),this.$notify.success({message:"重置好了",description:"重置好了"})}catch(e){this.$notify.error({message:"重置出错了",description:(null==e?void 0:e.message)||"".concat(e)})}}}},f=(n(821),n(138)),p=Object(f.a)(m,l,[],!1,null,null,null);p.options.__file="src/client/pages/model-admin-edit/edit-form.vue";var h={components:{EditForm:p.exports},createStore:function(e){var t=e.runtime,n=e.ajax,r=n.get,a=n.post;return new c.a.Store({state:{modelInfo:{},editId:t.query.id||"",editFormFields:[],editFormData:{},editFormDataResetJson:"{}",loading:!1},mutations:{setEditId:function(e,t){e.editId=t.id},setEditFormFields:function(e,t){var n=t.data;e.editFormFields=n.fields,e.modelInfo=n.modelInfo},resetEditFormData:function(e){e.editFormData=JSON.parse(e.editFormDataResetJson)},setEditFormData:function(e,t){var n=t.values;e.editFormDataResetJson=JSON.stringify(n),e.editFormData=n},setLoading:function(e,t){e.loading=!!t}},actions:{fetchEditFormFields:function(){var e=this;return s()(i.a.mark((function t(){var n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r("fields/",{});case 2:if(n=t.sent,(a=n.data).success){t.next=6;break}throw new Error(a.message||"获取表单结构失败了");case 6:e.commit("setEditFormFields",a);case 7:case"end":return t.stop()}}),t)})))()},fetchEditData:function(e){var t=this;return s()(i.a.mark((function n(){var a,o,s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.state,n.next=3,r("values/",{id:a.editId});case 3:if(o=n.sent,(s=o.data).success){n.next=7;break}throw new Error(s.message||"获取初始化数据失败了");case 7:t.commit("setEditFormData",s.data);case 8:case"end":return n.stop()}}),n)})))()},formSubmit:function(e){var t=this;return s()(i.a.mark((function n(){var r,o,s,d;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=e.state,n.next=3,a("submit/",{editId:o.editId,formData:o.editFormData});case 3:return s=n.sent,(null==(d=s.data)?void 0:d.success)&&(null==d||null===(r=d.data)||void 0===r?void 0:r.id)&&(t.commit("setEditId",d.data),t.commit("setEditFormData",d.data)),n.abrupt("return",s.data);case 7:case"end":return n.stop()}}),n)})))()}}})},fetchData:function(e){return s()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.store.dispatch("fetchEditFormFields"),e.store.dispatch("fetchEditData")]);case 2:case"end":return t.stop()}}),t)})))()},data:function(){return{zhCN:d.a}},computed:{state:function(){return this.$store.state}}},b=(n(823),Object(f.a)(h,r,[],!1,null,null,null));b.options.__file="src/client/pages/model-admin-edit/app.vue";t.default=b.exports}}]);